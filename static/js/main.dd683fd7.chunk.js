(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,n){e.exports=n(289)},128:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),i=(n(128),n(112)),l=n(18),u=n(19),m=n(22),s=n(20),d=n(23),p=n(15),f=n(57),b=n.n(f),h=n(119),v=n.n(h),O=n(122),C=n.n(O),E=n(121),j=n.n(E),g=n(120),y=n.n(g),N=n(118),w=n.n(N),x=n(75),S=n.n(x),I=n(26),k=n.n(I),D=n(114),T=n.n(D),M=n(115),_=n.n(M),L=n(21),A=n(116),q=n.n(A),z=n(36),P=n.n(z),F=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.addComment;return r.a.createElement(T.a,{position:"absolute",color:"primary",className:t.container},r.a.createElement(_.a,null,r.a.createElement(P.a,{color:"secondary","aria-label":"Add",className:t.fabButton,onClick:n},r.a.createElement(q.a,null))))}}]),t}(a.Component),B={addComment:function(){return{type:"OPEN_ADD_COMMENT"}}},H=Object(L.b)(function(e){return{}},B)(Object(p.withStyles)(function(e){return{container:{top:"auto",bottom:0},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}})(F)),U=n(53),V=n.n(U),W=n(56),G=n.n(W),X=n(55),J=n.n(X),R=n(54),$=n.n(R),K=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.classes,o=e.user,c=e.date;return r.a.createElement(a.Fragment,null,r.a.createElement(k.a,{className:n.container},r.a.createElement("div",{className:"title"},r.a.createElement("span",null,o),r.a.createElement("b",null,c)),r.a.createElement("p",null,t)))}}]),t}(a.Component),Q=Object(p.withStyles)(function(e){return{container:{backgroundColor:"#2c2f34",position:"relative",color:"#ffffff",margin:"10px 20px 8px 180px",padding:"20px 60px 20px 20px","& .title":{display:"flex",justifyContent:"space-between"}},fab:{position:"absolute",bottom:12,right:12}}})(K),Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(s.a)(t).call(this,e))).state={hover:!1,open:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.classes,c=t.user,i=t.date,l=t.list,u=t.addThirdLevelComment,m=t.rootId,s=t.parentId,d=this.state,p=d.hover,f=d.open;return r.a.createElement(a.Fragment,null,r.a.createElement(k.a,{className:o.container,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}},r.a.createElement("div",{className:"title"},r.a.createElement("span",null,c),r.a.createElement("b",null,i)),r.a.createElement("p",null,n),p&&r.a.createElement(P.a,{color:"secondary",className:o.fab,onClick:function(){return u(m,s)}},r.a.createElement(V.a,null))),l.length>0&&r.a.createElement("div",{className:o.expand,onClick:function(){return e.setState({open:!f})}},r.a.createElement($.a,{size:"small"},f?r.a.createElement(J.a,null):r.a.createElement(G.a,null))),r.a.createElement(a.Fragment,null,f&&l.map(function(e,t){return r.a.createElement(Q,{key:t,user:e.user,date:e.dateCreated.toString(),list:e.children},e.comment)})))}}]),t}(a.Component),Z={addThirdLevelComment:function(e,t){return{type:"OPEN_THIRD_LEVEL_COMMENT",payload:{rootId:e,parentId:t}}}},ee=Object(L.b)(function(e){return{}},Z)(Object(p.withStyles)(function(e){return{container:{backgroundColor:"#2c2f34",position:"relative",color:"#ffffff",margin:"10px 20px 8px 120px",padding:"20px 60px 20px 20px","& .title":{display:"flex",justifyContent:"space-between"}},expand:{marginLeft:120},fab:{position:"absolute",bottom:12,right:12}}})(Y)),te=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(s.a)(t).call(this,e))).state={hover:!1,open:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.classes,c=t.user,i=t.date,l=t.list,u=t.addSecondLevelComment,m=t.rootId,s=this.state,d=s.hover,p=s.open;return r.a.createElement(a.Fragment,null,r.a.createElement(k.a,{className:o.container,onMouseEnter:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}},r.a.createElement("div",{className:"title"},r.a.createElement("span",null,c),r.a.createElement("b",null,i)),r.a.createElement("p",null,n),d&&r.a.createElement(P.a,{color:"secondary",className:o.fab,onClick:function(){return u(m)}},r.a.createElement(V.a,null))),l.length>0&&r.a.createElement("div",{className:o.expand},r.a.createElement($.a,{size:"small",onClick:function(){return e.setState({open:!p})}},p?r.a.createElement(J.a,null):r.a.createElement(G.a,null))),r.a.createElement(a.Fragment,null,p&&l.map(function(e,t){return r.a.createElement(ee,{key:t,rootId:m,parentId:e.id,user:e.user,date:e.dateCreated.toString(),list:e.children},e.comment)})))}}]),t}(a.Component),ne={addSecondLevelComment:function(e){return{type:"OPEN_SECOND_LEVEL_COMMENT",payload:e}}},ae=Object(L.b)(function(e){return{}},ne)(Object(p.withStyles)(function(e){return{container:{backgroundColor:"#2c2f34",position:"relative",color:"#ffffff",margin:"10px 20px 8px 60px",padding:"20px 60px 20px 20px","& .title":{display:"flex",justifyContent:"space-between"}},expand:{marginLeft:60},fab:{position:"absolute",bottom:12,right:12}}})(te)),re=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.comments;return r.a.createElement("div",{className:t.container},Object.keys(n).map(function(e,t){return r.a.createElement(ae,{key:t,rootId:n[e].id,user:n[e].user,date:n[e].dateCreated.toString(),list:n[e].children},n[e].comment)}))}}]),t}(a.Component),oe=Object(L.b)(function(e){return{comments:e.commentsStore.comments}},{})(Object(p.withStyles)(function(e){return{container:{display:"flex",height:"100%",color:"#2b2b2b",overflow:"auto",marginBottom:"6%",flexDirection:"column"}}})(re)),ce=n(77),ie=n.n(ce),le=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.userName,a=e.handleTextFieldChange;return r.a.createElement("div",null,r.a.createElement(ie.a,{fullWidth:!0,value:n,onChange:function(e){return a("userName",e.target.value)},label:"User Name"}),r.a.createElement(ie.a,{multiline:!0,fullWidth:!0,value:t,onChange:function(e){return a("comment",e.target.value)},rowsMax:"8",rows:"4",label:"Comment"}))}}]),t}(a.Component),ue={handleTextFieldChange:function(e,t){return{type:"HANDLE_TEXTFIELD_CHANGE",payload:{type:e,value:t}}}},me=Object(L.b)(function(e){return{comment:e.eventsStore.comment,userName:e.eventsStore.userName}},ue)(Object(p.withStyles)(function(e){return{}})(le)),se=n(78),de=n.n(se),pe=n(117),fe=[{id:1,user:"user 1",comment:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi luctus justo vel consequat faucibus. Vivamus et ipsum maximus est ultrices cursus in sed velit. Sed velit metus, fermentum at lacinia sed, sagittis posuere risus. Nullam leo tortor, imperdiet vel ullamcorper varius, consectetur at libero. Duis urna nisi, aliquet dignissim turpis in, dignissim tincidunt mi. Donec eget tempus nisl. Fusce lobortis, lorem eget tempus porttitor, elit libero bibendum erat, eu volutpat turpis elit at est. Nullam condimentum ultrices libero ac auctor. Nulla in neque nisi. Morbi non dapibus quam. Aliquam pharetra at risus nec congue. Nullam et sapien libero. Nulla eget ante consectetur, fermentum turpis vitae, vestibulum leo. Nunc eu sapien vel augue luctus euismod. Phasellus quis vulputate orci. Nam rhoncus, nunc et aliquam interdum, elit dui pulvinar augue, a pulvinar tellus diam eget leo.",dateCreated:new Date(2018,1,14),refComment:null},{id:3,user:"user 3",dateCreated:new Date(2018,2,18),comment:"The quick brown fox jumps over the lazy dog",refComment:1},{id:2,user:"user 2",dateCreated:new Date(2018,2,22),comment:"The quick brown fox jumps over the lazy dog",refComment:null},{id:4,user:"user 4",dateCreated:new Date(2018,2,22),comment:"The quick brown fox jumps over the lazy dog",refComment:1},{id:11,user:"user 4",dateCreated:new Date(2018,3,1),comment:"The quick brown fox jumps over the lazy dog",refComment:null},{id:12,user:"user 3",dateCreated:new Date(2018,3,12),comment:"The quick brown fox jumps over the lazy dog",refComment:null},{id:5,user:"user 2",dateCreated:new Date(2018,5,8),comment:"The quick brown fox jumps over the lazy dog",refComment:1},{id:6,user:"user 2",dateCreated:new Date(2018,5,18),comment:"The quick brown fox jumps over the lazy dog",refComment:2},{id:7,user:"user 4",dateCreated:new Date(2018,6,22),comment:"The quick brown fox jumps over the lazy dog",refComment:2},{id:8,user:"user 1",dateCreated:new Date(2018,6,18),comment:"The quick brown fox jumps over the lazy dog",refComment:3},{id:9,user:"user 2",dateCreated:new Date(2018,7,18),comment:"The quick brown fox jumps over the lazy dog",refComment:3},{id:10,user:"user 2",dateCreated:new Date(2018,12,18),comment:"The quick brown fox jumps over the lazy dog",refComment:6}],be=n(16),he=n(13),ve=function(e){var t=e.filter(function(e){return null===e.refComment&&e}).reduce(function(e,t){return Object(he.a)({},e,Object(be.a)({},t.id,Object(he.a)({},t,{children:[]})))},{});return function(e,t){for(var n in t)e.hasOwnProperty(t[n].refComment)&&e[t[n].refComment].children.push(Object(he.a)({},t[n],{children:[]}));return Promise.resolve(e)}(t,e).then(function(){return function(e,t){var n=function(n){if(null!==t[n].refComment&&!e.hasOwnProperty(t[n].refComment)){var a=function(e,t){var n=[],a=t[e].refComment;function r(e){return e.id===a}for(;null!==a;){n.push(a);var o=t.find(r);a=o.refComment}return n}(n,t);e[a[1]].children=e[a[1]].children.map(function(e){return e.id===a[0]&&e.children.push(t[n]),e})}};for(var a in t)n(a)}(t,e),t})};function Oe(e){return r.a.createElement(w.a,Object.assign({direction:"up"},e))}var Ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(){var e=n.props,t=e.comment,a=e.userName,r=e.handleSubmit;0!==t.length&&0!==a&&function(e){return-1===e.toLowerCase().indexOf("script")}(t)?r(function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}(t)):alert("Invalid comment or username")},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchAllComments()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.openAddComment,a=e.closeAddComment;return r.a.createElement("div",{className:t.root},r.a.createElement("img",{src:'javascript:alert("XSS");'}),r.a.createElement(k.a,{className:"main-container"},r.a.createElement(S.a,{className:"header",variant:"h5",gutterBottom:!0},"Comments"),r.a.createElement(oe,null),r.a.createElement(H,null)),r.a.createElement(v.a,{open:n,TransitionComponent:Oe,className:t.dialog,keepMounted:!0,onClose:a,"aria-labelledby":"add-comment-dialog-title","aria-describedby":"add-comment-dialog-description"},r.a.createElement(y.a,{id:"add-comment-dialog-title"},"Add Comment"),r.a.createElement(j.a,{className:"dialog-content"},r.a.createElement(me,null)),r.a.createElement(C.a,null,r.a.createElement(b.a,{onClick:a,color:"primary"},"Close"),r.a.createElement(b.a,{onClick:this.handleSubmit,color:"primary"},"Submit"))))}}]),t}(a.Component),Ee={closeAddComment:function(){return{type:"CLOSE_ADD_COMMENT"}},fetchAllComments:function(){return function(){var e=Object(pe.a)(de.a.mark(function e(t){var n;return de.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(fe);case 2:return n=e.sent,e.abrupt("return",t({type:"GET_ALL_COMMENTS_SUCCESS",payload:n}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},handleSubmit:function(e){return function(t,n){var a=n().eventsStore,r=a.userName,o=a.rootId,c=a.parentId;return t({type:"HANDLE_SUBMIT",payload:{comment:e,userName:r,rootId:o,parentId:c}})}}},je=Object(L.b)(function(e){return{comment:e.eventsStore.comment,userName:e.eventsStore.userName,openAddComment:e.eventsStore.openAddComment}},Ee)(Object(p.withStyles)(function(e){return{root:{display:"flex",flexWrap:"nowrap",height:"100%","& .main-container":{maxWidth:1080,width:"100%",position:"relative",margin:"30px auto",display:"flex",flexDirection:"column"},"& .header":{padding:2*e.spacing.unit},"& .footer-container":{top:"auto",bottom:0}},dialog:{"& .dialog-content":{width:200}}}})(Ce)),ge=n(29);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye,Ne,we=n(79),xe={comments:{},lastId:13},Se=(ye={},Object(be.a)(ye,"GET_ALL_COMMENTS_SUCCESS",function(e,t){return Object(he.a)({},e,{comments:t.payload})}),Object(be.a)(ye,"HANDLE_SUBMIT",function(e,t){var n=t.payload,a=n.rootId,r=n.userName,o=n.comment,c=n.parentId;if(null===a)return Object(he.a)({},e,{comments:Object(he.a)({},e.comments,Object(be.a)({},e.lastId,{id:e.lastId,user:r,dateCreated:new Date,refComment:null,comment:o,children:[]})),lastId:e.lastId+1});if(null===c)return Object(he.a)({},e,{comments:Object(he.a)({},e.comments,Object(be.a)({},a,Object(he.a)({},e.comments[a],{children:[].concat(Object(we.a)(e.comments[a].children),[{id:e.lastId,user:r,dateCreated:new Date,refComment:a,comment:o,children:[]}])}))),lastId:e.lastId+1});var i=e.comments[a].children.map(function(t){return t.id===c&&(t.children=[].concat(Object(we.a)(t.children),[{id:e.lastId,user:r,dateCreated:new Date,refComment:c,comment:o}])),t});return Object(he.a)({},e,{comments:Object(he.a)({},e.comments,Object(be.a)({},a,Object(he.a)({},e.comments[a],{children:i}))),lastId:e.lastId+1})}),ye),Ie={openAddComment:!1,rootId:null,parentId:null,userName:"",comment:""},ke=(Ne={},Object(be.a)(Ne,"HANDLE_TEXTFIELD_CHANGE",function(e,t){return Object(he.a)({},e,Object(be.a)({},t.payload.type,t.payload.value))}),Object(be.a)(Ne,"HANDLE_SUBMIT",function(e,t){return Object(he.a)({},Ie)}),Object(be.a)(Ne,"OPEN_ADD_COMMENT",function(e,t){return Object(he.a)({},e,{openAddComment:!0})}),Object(be.a)(Ne,"OPEN_THIRD_LEVEL_COMMENT",function(e,t){return Object(he.a)({},e,{rootId:t.payload.rootId,parentId:t.payload.parentId,openAddComment:!0})}),Object(be.a)(Ne,"OPEN_SECOND_LEVEL_COMMENT",function(e,t){return Object(he.a)({},e,{parentId:null,rootId:t.payload,openAddComment:!0})}),Object(be.a)(Ne,"CLOSE_ADD_COMMENT",function(e,t){return Object(he.a)({},Ie)}),Ne),De=Object(ge.c)({commentsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0,n=Se[t.type];return n?n(e,t):e},eventsStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,n=ke[t.type];return n?n(e,t):e}}),Te=Object(ge.d)(De,Object(ge.a)(i.a)),Me=Object(p.createMuiTheme)({typography:{useNextVariants:!0}});c.a.render(r.a.createElement(p.MuiThemeProvider,{theme:Me},r.a.createElement(L.a,{store:Te},r.a.createElement(je,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,2,1]]]);
//# sourceMappingURL=main.dd683fd7.chunk.js.map